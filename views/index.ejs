<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content='width=device-width, initial-scale=1, shrink-to-fit=no'>
    <title>KopiChain - Home</title>
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@400;700&family=Yatra+One&display=swap"
        rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Urbanist', sans-serif;
            background: linear-gradient(117deg, #f8f4e1 -96.55%, #ba7123 145.24%);
            color: #ffffff;
        }

        .logo {
            font-family: 'Yatra One', cursive;
            font-size: 30px;
            color: #ffffff;
            padding-top: 20px;
        }

        header {
            padding: 20px 0;
        }

        header .nav-link {
            font-family: 'Urbanist', sans-serif;
            color: #ffffff;
        }

        header .nav-link:hover {
            color: #000;
        }

        header .active {
            background-color: #f8f4e1;
            align-self: stretch;
            color: #74512d;
            white-space: nowrap;
            text-align: center;
            justify-content: center;
            padding: 5px 10px;
            border-radius: 50px;
        }

        header .btn-login {
            background-color: #ffffff;
            color: #000;
            font-weight: bold;
            border: none;
        }

        .hero {
            border-radius: 30px 30px 200px 30px;
            background: linear-gradient(to right, #CFA062, #BF7C2E);
            margin-top: 10px;
            width: 90%;
            max-width: 1200px;
            padding: 0 36px 20px;
        }

        .hero h2 {
            font-size: 38px;
            padding-bottom: 10px;
            margin-top: 30px;
            font-weight: bold;
            color: #ffffff;
        }

        .hero p {
            font-size: 16px;
            color: #efecec;
        }

        .search-bar {
            border-radius: 50px;
            background-color: #fff;
            display: flex;
            margin-top: 25px;
            width: 70%;
            gap: 10px;
            justify-content: space-between;
            padding: 8px 20px;
        }

        @media (max-width: 991px) {
            .search-bar {
                max-width: 70%;
                flex-wrap: wrap;
                margin-top: 20px;
                padding: 0 20px;
            }
        }

        .search-bar .search-input {
            display: flex;
            gap: 10px;
            font-size: 18px;
            color: rgba(112, 112, 112, 0.5);
            font-weight: 100;
            margin: auto 0;
        }

        .search-bar img {
            aspect-ratio: 1;
            object-fit: auto;
            object-position: center;
            width: 20px;
        }

        .search-bar input[type="text"] {
            font-family: 'Poppins', sans-serif;
            flex-grow: 1;
            flex-basis: auto;
            margin: auto 0;
            border: none;
            outline: none;
        }

        .search-bar .search-button {
            border-radius: 50px;
            background-color: #74512d;
            color: #fff;
            white-space: nowrap;
            text-align: center;
            justify-content: center;
            padding: 12px 23px;
            font: 600 14px 'Poppins', sans-serif;
            border: none;
            cursor: pointer;
        }

        @media (max-width: 991px) {
            .search-bar .search-button {
                white-space: initial;
                padding: 0 20px;
            }
        }

        .img-2 {
            aspect-ratio: 1;
            object-fit: cover;
            margin-top: 20px;
            object-position: center;
            width: 90%;
            height: 100%;
        }

        @media (max-width: 991px) {
            .img-2 {
                max-width: 100%;
            }
        }

        .about-us {
            background-color: #F8F4E1;
            color: #74512D;
            padding: 50px 0;
            margin-top: 70px;
            padding-bottom: 10px;
        }

        .about-us h2 {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }

        .about-us .content {
            display: flex;
            flex-wrap: wrap;
            text-align: justify;
            align-items: flex-start;
            margin: 0 3%;
        }

        .about-us .left,
        .about-us .right {
            flex: 1;
            margin: 30px;
            max-width: 45%;
        }

        .about-us .right {
            text-align: center;
        }

        .about-us .left p,
        .about-us .right p {
            font-size: 18px;
            margin-bottom: 20px;
        }

        .about-us .left img {
            display: block;
            margin: 20px auto;
            max-height: 250px;
        }

        .about-us .video {
            width: 100%;
            height: 300px;
            border-radius: 10px;
        }

        .about-us .partners {
            margin-top: 20px;
            text-align: center;
        }

        .about-us .partners h5 {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .about-us .partners img {
            margin: 0 10px;
            max-height: 80px;
        }

        .products {
            background: linear-gradient(117deg, #f8f4e1 -96.55%, #ba7123 145.24%);
            color: #74512D;
            padding: 50px 0;
            text-align: center;
        }

        .products h2 {
            font-size: 36px;
            color: #fff;
            font-weight: bold;
            text-align: center;
        }

        .products p {
            font-size: 16px;
            color: #ffffff;
            margin-top: -10px;
            margin-bottom: 30px;
            text-align: center;
        }

        .carousel-control-prev-icon,
        .carousel-control-next-icon {
            background-color: #ffffff;
            border-radius: 50%;
        }

        .product-card {
            background-color: #fff;
            border-radius: 15px;
            padding: 20px;
            width: 250px;
            height: 250px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .product-card img {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }

        .product-name {
            font-family: 'Urbanist', sans-serif;
            font-weight: 600;
            font-size: 20px;
            margin-top: 10px;
            color: #fff;
        }

        .product-description {
            font-family: 'Urbanist', sans-serif;
            font-weight: 300;
            font-size: 12px;
            color: #ffffff;
        }

        .footer {
            background-color: #543310;
            color: #ffffff;
            padding: 40px 0;
        }

        .footer h2 {
            font-size: 24px;
            margin-bottom: 20px;
            text-align: justify;
        }

        .footer p {
            font-size: 16px;
            margin-bottom: 10px;
        }

        .footer .footer-section {
            margin-bottom: 20px;
        }

        .footer .footer-section h4 {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .footer .footer-section ul {
            list-style: none;
            text-align: center;
            padding: 0;
        }

        .footer .footer-section ul li {
            margin-bottom: 10px;
        }

        .footer .footer-section ul li a {
            color: #ffffff;
            text-decoration: none;
        }

        .footer .footer-section ul li a:hover {
            text-decoration: underline;
        }

        .footer .footer-section .social-icons img {
            width: 25px;
            margin-right: 15px;
            margin-top: 10px;
        }

        .footer .footer-section .contact-icons img {
            width: 10px;
            /* Ukuran lebih kecil untuk WhatsApp dan Email */
            margin-right: 5px;
        }

        .footer .contact-icons {
            width: 20px;
            vertical-align: middle;
            margin-right: 10px;
        }

        .footer hr {
            border-top: 1px solid #fff;
            /* Warna garis putih */
            margin: 10px 0;
        }

        .navbar-toggler {
            border-color: rgba(255, 255, 255, 0.1);
        }

        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml;charset=utf8,%3Csvg viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='rgba%2888, 88, 88, 0.7%29' stroke-width='2' linecap='round' linejoin='round' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E");
        }

        @media (max-width: 991px) {
            .navbar-nav {
                text-align: left;
            }
        }

        .btn-admin {
            background-color: #BF7C2E;
            color: #ffffff;
        }

        .btn-stakeholder {
            background-color: #CFA062;
            color: #ffffff;
        }
    </style>
</head>

<body>
    <!-- Header Section -->
    <header class='container'>
        <div class='d-flex justify-content-between align-items-center'>
            <h1 class='logo'><a href="index.html" style="color: #ffffff; text-decoration: none;">KOPI MBEKAYU</a></h1>
            <nav class="navbar navbar-expand-lg">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class='navbar-nav ml-auto'>
                        <li class='nav-item'><a class='nav-link active' href='index.html'>Home</a></li>
                        <li class='nav-item'><a class='nav-link' href='#about-us'>About Me</a></li>
                        <li class='nav-item'><a class='nav-link' href='#products'>Product</a></li>
                        <li class='nav-item'><a class='nav-link' href='#footer'>Contact</a></li>
                    </ul>
                    <button class='btn btn-login' data-toggle="modal" data-target="#loginModal">Login</button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="home" class='hero container d-flex justify-content-center align-items-center'>
        <div class='row w-100'>
            <div class='col-lg-6 hero-left d-flex flex-column justify-content-center'>
                <h2>Implementasi Teknologi Blockchain pada Rantai Pasok Kopi</h2>
                <p>Kami menggunakan teknologi blockchain untuk memastikan bahwa setiap biji kopi yang Anda nikmati
                    adalah asli dan dapat dilacak dengan transparansi penuh dari perkebunan hingga cangkir Anda.</p>
                <div class='search-bar row d-flex my-4'>
                    <div class="search-input col-7">
                        <img loading="lazy"
                            srcset="https://cdn.builder.io/api/v1/image/assets/TEMP/a4b53a23de1f89797f17c67dbf6a4e3bd1a47e724626bd4093176be70392e4a0?apiKey=cd4a30474c4d499ea749e0e1c10f1397&width=100 100w, https://cdn.builder.io/api/v1/image/assets/TEMP/a4b53a23de1f89797f17c67dbf6a4e3bd1a47e724626bd4093176be70392e4a0?apiKey=cd4a30474c4d499ea749e0e1c10f1397&width=200 200w, https://cdn.builder.io/api/v1/image/assets/TEMP/a4b53a23de1f89797f17c67dbf6a4e3bd1a47e724626bd4093176be70392e4a0?apiKey=cd4a30474c4d499ea749e0e1c10f1397&width=400 400w, https://cdn.builder.io/api/v1/image/assets/TEMP/a4b53a23de1f89797f17c67dbf6a4e3bd1a47e724626bd4093176be70392e4a0?apiKey=cd4a30474c4d499ea749e0e1c10f1397&width=800 800w, https://cdn.builder.io/api/v1/image/assets/TEMP/a4b53a23de1f89797f17c67dbf6a4e3bd1a47e724626bd4093176be70392e4a0?apiKey=cd4a30474c4d499ea749e0e1c10f1397&width=1200 1200w, https://cdn.builder.io/api/v1/image/assets/TEMP/a4b53a23de1f89797f17c67dbf6a4e3bd1a47e724626bd4093176be70392e4a0?apiKey=cd4a30474c4d499ea749e0e1c10f1397&width=1600 1600w, https://cdn.builder.io/api/v1/image/assets/TEMP/a4b53a23de1f89797f17c67dbf6a4e3bd1a47e724626bd4093176be70392e4a0?apiKey=cd4a30474c4d499ea749e0e1c10f1397&width=2000 2000w, https://cdn.builder.io/api/v1/image/assets/TEMP/a4b53a23de1f89797f17c67dbf6a4e3bd1a47e724626bd4093176be70392e4a0?apiKey=cd4a30474c4d499ea749e0e1c10f1397&"
                            class="img">
                        <input id="search-input" type="text" class="search-text" placeholder="masukkan id produk">
                    </div>
                    <button id="search-button" class='search-button col-3' style="float: right;">Cari</button>
                </div>
            </div>
            <div class='col-lg-6 hero-right d-flex flex-column justify-content-center align-items-center'>
                <img src='/images/kopi-mbekayu-kopi-asli-banyumas.png' alt='Coffee Beans' class='img-fluid img-2'>
            </div>
        </div>
    </section>

    <!-- About Us Section -->
    <section id="about-us" class="about-us">
        <h2>Tentang Kami</h2>
        <div class="content">
            <div class="left">
                <p>CV. Mbekayu Makmur Migunani adalah produsen kopi dari Banyumas yang mengedepankan teknologi
                    blockchain dalam rantai pasoknya. Kami memastikan setiap biji kopi yang Anda nikmati adalah asli dan
                    dapat dilacak dari perkebunan hingga cangkir Anda.</p>
                <p>Kami berkomitmen untuk memberikan transparansi penuh dan membangun kepercayaan dengan pelanggan kami.
                    Dengan menggunakan teknologi terkini, kami ingin memberikan pengalaman terbaik dalam menikmati kopi.
                </p>
                <img src="/images/kopi-mbekayu-kopine-wong-banyumas.png" alt="Kopi Mbekayu">
            </div>
            <div class="right">
                <div class="video-placeholder">
                    <iframe class="video" src="https://www.youtube.com/embed/zzbDPzUIT7U" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen></iframe>
                </div>
                <br>
                <hr>
                <div class="partners">
                    <h5>Mitra Kami</h5>
                    <img src="/images/kabupaten-banyumas-logopng.png" alt="Logo Mitra 3">
                    <img src="/images/KAI-removebg-preview.png" alt="Logo Mitra 2">
                    <img src="/images/ritasmpwt-removebg-preview.png" alt="Logo Mitra 1">
                    <img src="/images/SURYA-YUDHA.png" alt="Logo Mitra 1">
                </div>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="products">
        <h2>Produk Kami</h2>
        <p>Berbagai varian produk yang tersedia di sini</p>
        <div id="productCarousel" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <div class="row justify-content-center">
                        <div class="col-md-3">
                            <div class="product-card">
                                <img src="/images/kopi-mbekayu-kopi-asli-banyumas.png" alt="Kopi Robusta">
                            </div>
                            <div class="product-name">Kopi Robusta</div>
                            <div class="product-description">
                                Cita rasa pahit yang kuat dan <br> kandungan kafein lebih tinggi. </div>
                        </div>
                        <div class="col-md-3">
                            <div class="product-card">
                                <img src="/images/kopi-excelsa.jpeg" alt="Kopi Excelsa">
                            </div>
                            <div class="product-name">Kopi Excelsa</div>
                            <div class="product-description">Rasa pahit yang mendominasi namun <br> disertai rasa asam
                                dan gurih.</div>
                        </div>
                        <div class="col-md-3">
                            <div class="product-card">
                                <img src="/images/kopi-mbekayu-kopi-asli-banyumas.png" alt="Kopi Arabica">
                            </div>
                            <div class="product-name">Kopi Arabica</div>
                            <div class="product-description">Rasa dominan asam (kecut) dan <br> kafein lebih rendah
                                dibanding robusta.</div>
                        </div>
                    </div>
                </div>
                <div class="carousel-item">
                    <div class="row justify-content-center">
                        <div class="col-md-3">
                            <div class="product-card">
                                <img src="/images/kopi-tubruk-2.png" alt="Kopi Tubruk">
                            </div>
                            <div class="product-name">Kopi Tubruk</div>
                            <div class="product-description">Kopi Robusta yang sudah dikemas <br> dalam saset untuk
                                pecinta kopi praktis.</div>
                        </div>
                        <div class="col-md-3">
                            <div class="product-card">
                                <img src="/images/kopi-clebek.jpeg" alt="Kopi Clebek">
                            </div>
                            <div class="product-name">Kopi Clebek</div>
                            <div class="product-description">Perpaduan dari kopi robusta dan excelsa.</div>
                        </div>
                        <div class="col-md-3">
                            <div class="product-card">
                                <img src="/images/kopi-susu-mbekayu-kopi-asli-banyumas.jpg" alt="Kopi Susu">
                            </div>
                            <div class="product-name">Kopi Susu</div>
                            <div class="product-description">Minuman Kopi Susu yang enak <br> dinikmati saat dingin.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <a class="carousel-control-prev" href="#productCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#productCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </section>

    <!-- Footer Section -->
    <footer id="footer" class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-4 footer-section">
                    <h4>Kopi Mbekayu</h4>
                    <p>Menghadirkan keamanan dan kepastian dalam setiap biji kopi pilihan yang kita konsumsi, mulai dari
                        proses pengambilan biji kopi, pengolahan hingga distribusi.</p>
                    <hr>
                    <p>Copyright © 2024 - Design by Rina</p>
                </div>
                <div class="col-md-4 footer-section text-center">
                    <h4>Layanan</h4>
                    <ul>
                        <li><a href="#home">Lacak Produk</a></li>
                        <li><a href="https://wa.me/628112801969">Beli Biji Kopi</a></li>
                        <li><a href="https://wa.me/628112801969">Reseller</a></li>
                    </ul>
                </div>
                <div class="col-md-4 footer-section">
                    <h4>Butuh Bantuan? <br> Hubungi Kami Kapanpun</h4>
                    <p><img src="https://img.icons8.com/ios-filled/50/FFFFFF/whatsapp--v1.png" alt="whatsapp--v1"
                            class="contact-icons"> 0838-7306-2600</p>
                    <p><img src="https://img.icons8.com/ios-filled/50/FFFFFF/new-post.png" alt="email"
                            class="contact-icons"> emailrina0499@gmail.com</p>
                    <div class="social-icons">
                        <a href="https://www.instagram.com/kopimbekayu/"><img
                                src="https://img.icons8.com/ios-filled/50/FFFFFF/instagram-new--v1.png"
                                alt="Instagram Icon"></a>
                        <a href="https://www.youtube.com/channel/UCU_nSGfTrvIYfCAX1gCNmOA"><img
                                src="https://img.icons8.com/ios-filled/50/FFFFFF/youtube-play.png"
                                alt="youtube-play"></a>
                        <a href="https://www.tiktok.com/@kopimbekayu"><img
                                src="https://img.icons8.com/ios-filled/50/FFFFFF/tiktok--v1.png" alt="tiktok--v1"></a>
                        <a href="https://www.facebook.com/kopimbekayu/"><img
                                src="https://img.icons8.com/ios-filled/50/FFFFFF/facebook-new.png"
                                alt="facebook-new"></a>
                    </div>
                </div>
            </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="loginModalLabel">Login</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <button id="loginButton" class="btn btn-admin btn-block">Masuk</button>

                </div>
            </div>
        </div>
    </div>

    <script src='https://code.jquery.com/jquery-3.5.1.slim.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js'></script>
    <script src='https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.3.6/dist/web3.min.js"></script>

    <script>
        document.getElementById('search-button').addEventListener("click", () => {
            let id = document.getElementById('search-input').value
            window.location.href = `/trace?id=${id}`
        })
        document.getElementById('loginButton').addEventListener('click', async () => {
            const abi = await fetch("/sc/abi.json").then((res) => res.json());
            const address = await fetch("/sc/address.json").then((res) => res.json());
            const bytecode = await fetch("/sc/bytecode.txt").then((res) => res.text());

            localStorage.setItem("abi", JSON.stringify(abi))
            localStorage.setItem("address", JSON.stringify(address))
            localStorage.setItem("bytecode", bytecode)


            // Check if MetaMask is installed
            if (typeof window.ethereum !== 'undefined') {
                try {
                    // Request account access if needed
                    await ethereum.request({ method: 'eth_requestAccounts' });

                    // We use the MetaMask provider to create a new Web3 instance
                    const web3 = new Web3(window.ethereum);

                    // Get the user's Ethereum address
                    const accounts = await web3.eth.getAccounts();
                    // console.log(accounts)
                    const userAddress = accounts[0];
                    localStorage.setItem("active-user", userAddress);
                    const contract = new web3.eth.Contract(abi, address.address);
                    try {

                        const user = await contract.methods.getUserDetail(userAddress).call();
                        let session = {}
                        for (const iterator in user) {
                            if(typeof user[iterator] === "string"){
                                session[iterator] = typeof user[iterator] === "bigint" ? user[iterator].toString() : user[iterator]
                            }
                        }
                        // console.log(session)
                        localStorage.setItem("session", JSON.stringify(session));
                        
                        switch (user.roleName) {
                            case "PETANI":
                                return window.location.href = "/petani/dashboard"
                            case "PENGEPUL":
                                return window.location.href = "/pengepul/dashboard"
                            case "PRODUSER":
                                return window.location.href = "/produser/dashboard"
                            case "COFFEE-SHOP":
                                return window.location.href = "/coffee-retail/dashboard"
                            case "ADMIN":
                                return window.location.href = "/admin/dashboard"

                        }
                    } catch (error) {
                        console.log(error)
                        alert("Gagal Login, Terjadi kesalahan. Hubungi admin dan pastikan akun anda telah terdaftar");
                    }


                    // Display the user's address
                    // document.getElementById('userAddress').innerText = `Logged in as: ${userAddress}`;
                } catch (error) {
                    console.error("User denied account access or there was an error: ", error);
                }
            } else {
                console.log('MetaMask is not installed. Please install it to use this app.');
            }
        });
    </script>
</body>

</html>
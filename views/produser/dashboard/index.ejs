<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content='width=device-width, initial-scale=1, shrink-to-fit=no'>
    <title>Dashboard Pengepul - KopiChain</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&family=Yatra+One&display=swap" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/styles/index.css">
    <script src="https://cdn.jsdelivr.net/npm/web3@1.3.6/dist/web3.min.js"></script>

</head>
<body>
    <div class="navbar">
        <div class="logo">KOPI MBEKAYU</div>
        <div class="title">SISTEM TRACEABILITY</div>
    </div>
    <%-include("../components/sidebar")%>
    <div class="content">
        <div class="header">
            <h1>DASHBOARD PRODUSER</h1>
        </div>
        <div class="stats">
            <div class="stat">
                <h3>Transaksi Keluar</h3>
                <p>Jumlah Transaksi</p>
                <h3 id="transaction-out">0</h3>
            </div>
            <div class="stat">
                <h3>Transaksi Masuk</h3>
                <p>Jumlah Transaksi</p>
                <h3 id="transaction-in">0</h3>
            </div>
        </div>
        <div class="header-with-search">
            <button class="btn-add-transaction" data-toggle="modal" data-target="#addTransactionModal">Tambah Produk</button>
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Search...">
            </div>
        </div>
        <%- include("components/table")%>
    </div>

    <!-- Add Transaction Modal -->
    <%-include("components/modal")%>

    <script src='https://code.jquery.com/jquery-3.5.1.slim.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js'></script>
    <script src='https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js'></script>
    <script>
        document.getElementById("logout").addEventListener("click", function() {
            window.location.href = "index.html";
        });

        document.getElementById('searchInput').addEventListener('input', function () {
            var filter = this.value.toUpperCase();
            var rows = document.querySelectorAll('.transaction-table tbody tr');

            rows.forEach(function (row) {
                var cells = row.getElementsByTagName('td');
                var match = false;

                for (var i = 0; i < cells.length; i++) {
                    if (cells[i].innerText.toUpperCase().indexOf(filter) > -1) {
                        match = true;
                        break;
                    }
                }

                if (match) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>
